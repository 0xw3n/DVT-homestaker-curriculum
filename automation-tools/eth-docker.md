# ETH Docker

## VM/Hardware Setup

You will need to prepare your virtual machine (VM) or home staking hardware for all options below. Step-by-step guide below.

{% content-ref url="../hardware-and-systems-setup/assemble-your-hardware/practicing-on-cloud-vms.md" %}
[practicing-on-cloud-vms.md](../hardware-and-systems-setup/assemble-your-hardware/practicing-on-cloud-vms.md)
{% endcontent-ref %}

{% content-ref url="../hardware-and-systems-setup/assemble-your-hardware/" %}
[assemble-your-hardware](../hardware-and-systems-setup/assemble-your-hardware/)
{% endcontent-ref %}

## Lido CSM testnet workflow

### Video guide

{% embed url="https://www.youtube.com/watch?v=PQ5qLfbBeTI" %}

### Prepare your VM/Hardware

Create a new Google Cloud account to unlock $300 of free cloud credits.

Create a VM on the Google Cloud Console (or any other cloud provider) with the following machine specifications.

* CPU: 2 vCPU
* RAM: 8GB
* Disk: 350GB SSD
* OS: Ubuntu 24.04 LTS
* Enable HTTP & HTTPS traffic

{% hint style="info" %}
Estimated cost per month on Google Cloud = $84, or _**3.5 months of free practice time**_ with $300 of cloud credits&#x20;
{% endhint %}

## Download & configure ETH Docker

**SSH into your VM/hardware:** Click on the dropdown beside the **"SSH"** column and select **"Open in browser window".** Click on **"Authorize"** when prompted.

<figure><img src="https://dvt-homestaker.stakesaurus.com/~gitbook/image?url=https%3A%2F%2F1628445806-files.gitbook.io%2F%7E%2Ffiles%2Fv0%2Fb%2Fgitbook-x-prod.appspot.com%2Fo%2Fspaces%252FoML8XLjdWBoYbtGBoQ9R%252Fuploads%252F67CExXgVAXX8He9QB978%252Fimage.png%3Falt%3Dmedia%26token%3D76052e50-b3d8-4ef4-b143-ac07a32f45fb&#x26;width=768&#x26;dpr=4&#x26;quality=100&#x26;sign=8d7c4d17&#x26;sv=1" alt=""><figcaption></figcaption></figure>

Go to [Lido's ETH Docker repository ](https://github.com/lidofinance/eth-docker)and to get and run the installation commands. Run the next 2 commands in sequence.

```
cd ~ && git clone https://github.com/lidofinance/eth-docker.git && cd eth-docker
```

```
./ethd install
```

Exit your virtual machine/hardware and re-login to add your host user into the docker user group.

```
exit
```

Once you are back in, you will be able to call `ethd` from anywhere in your terminal. Next, configure the ETH Docker service.

```
ethd config
```

Follow along the prompts in the terminal UI (TUI) to:

1. Sync the execution client and consensus + validator client of your choice
2. Generate suitable validator keys to participate in the Lido CSM
   * Verify the fee recipient and withdrawal address on the [CSM Operator Portal](https://operatorportal.lido.fi/modules/community-staking-module)

### ETH Docker TUI Navigation

1. `Arrow keys & Tab key`: Cycle options
2. `Space bar`: Select option
3. `Enter`: Confirm option
4. `CTRL+B`, then `D`: Exit split-screen monitoring view
5. `CTRL+C`: Exit individual screen monitoring view
6. `exit` command (type "exit" and `enter` in terminal) : Exit current terminal

## Import validator keys

Change the user permissions of the folder containing your validator keys. Replace \<user> with your actual username of your VM.

```sh
sudo chown -R <user>:<user> ~/eth-docker/.eth/validator_keys
```

**Tip:** To find username, look to the terminal of your sever/node. Every character before the `@` is your username

Next, import the generated validator keys onto your validator client

```
ethd keys import
```

## Upload deposit data

Copy the deposit data generated by the command below for uploading onto the [CSM Widget](https://csm.testnet.fi/).

```
cat ~/eth-docker/.eth/validator_keys/deposit*json
```

{% content-ref url="../bonded-validators-setup/lido-csm/upload-remove-view-validator-keys.md" %}
[upload-remove-view-validator-keys.md](../bonded-validators-setup/lido-csm/upload-remove-view-validator-keys.md)
{% endcontent-ref %}

## View logs

Monitor the logs of your validator node to make sure that it is syncing (or synced) with no errors while you wait for Lido to provision your validator deposit with 32 ETH.

View logs of each docker container.

```
ethd logs <container_name> -f --tail 20
```

**Flags:**

* `-f`: Follow along the logs in real time. `CTRL+C` to exit monitoring view
* `--tail`: Print the last N lines of the logs.

Choose one to replace the `<container_name>` above.

```
blackbox-exporter          consensus                  execution                  json-exporter              node-exporter              promtail
cadvisor                   ethereum-metrics-exporter  grafana                    loki                       prometheus                 validator
```

## Support

{% embed url="https://t.me/stakesaurus" %}

## Donations

#### If you found this helpful, consider supporting Stakesaurus in one of few ways [here](https://dvt-homestaker.stakesaurus.com/#if-you-found-this-helpful-consider-supporting-stakesaurus-in-one-of-two-ways-below)!
